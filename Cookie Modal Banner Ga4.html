<!-- Cookie Modal Banner (centro, blocca interazione) -->
<div id="cookie-modal">
  <div id="cookie-content">
    <p>Questo sito utilizza cookie per analisi anonime e funzionalit√† del sito. Accetti l'uso dei cookie?</p>
    <button id="accept-cookies">Accetta</button>
    <button id="decline-cookies">Rifiuta</button>
  </div>
</div>

<style>
#cookie-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}
#cookie-content {
  background: #fff;
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  max-width: 400px;
  box-shadow: 0 0 15px rgba(0,0,0,0.3);
}
#cookie-content button {
  margin: 10px;
  padding: 10px 20px;
  font-size: 16px;
  border-radius: 5px;
  cursor: pointer;
}
#accept-cookies { background: #4CAF50; color: #fff; border: none; }
#decline-cookies { background: #f44336; color: #fff; border: none; }
</style>

<script>
const modal = document.getElementById('cookie-modal');
const acceptBtn = document.getElementById('accept-cookies');
const declineBtn = document.getElementById('decline-cookies');

acceptBtn.addEventListener('click', () => {
  modal.style.display = 'none';

  // Carica GA4 solo dopo il consenso
  const gtagScript = document.createElement('script');
  gtagScript.async = true;
  gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-RP9MX5E2LV';
  document.head.appendChild(gtagScript);

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  window.gtag = gtag;
  gtag('js', new Date());
  gtag('config', 'G-RP9MX5E2LV');
});

declineBtn.addEventListener('click', () => {
  modal.style.display = 'none';
  console.log('L'utente ha rifiutato i cookie.');
  // Non caricare GA4
});
</script>
